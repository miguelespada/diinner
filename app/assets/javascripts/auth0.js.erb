//= require jquery

  var lock = new Auth0Lock("<%= ENV['AUTH0_CLIENT_ID'] %>", "<%= ENV['AUTH0_DOMAIN'] %>", {
    assetsUrl: 'https://cdn.eu.auth0.com/'
  });

$(document).ready(function () {

  var host = $('#request').data("host") ;
  var port = $('#request').data("port") ;

  var domain = host + ':' + port;

  var callback_url = 'http://'+ domain + '/auth/auth0/callback';

  // TODO get as parameter unobstrussive JS and 
  <% if Rails.env.production? %>
      callback_url = "<%= ENV['AUTH0_CALLBACK'] %>";
  <% end %>

  lock.show({
    container: 'login-panel',
    connections: ['facebook', 'google-oauth2'],
    callbackURL:  callback_url,
    responseType: 'code',
    authParams: {
      scope: 'openid profile'
    }
  });
});
